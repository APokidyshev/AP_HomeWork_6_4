# Реализуем API отзывов к товару

## Цели домашнего задания

1. Научиться выполнять запросы к API
2. Реализовывать вьюшки
3. Познакомиться с сериализацией объектов
4. Закрепить навыки работы с административной панелью

## Задание

Необходимо реализовать небольшую часть API магазина, а именно товары и отзывы на них. Всего нужно реализовать 2 эндпоинта:

- `/products/` - список всех товаров
- `/products/<id_товара>/` - детальная информация о конкретном товаре

## Реализация


### БД

Создайте базу данных, подключите её к проекту и примените миграции для создания таблиц.

### Модели

В модуле `models.py` нашего приложения уже есть модель `Client` (данные покупателя). 

### Административная панель

В административной уже зарегистрированы необходимые запросы

### Сериализация

В модуле `serializers.py` уже есть заготовка 3 сериализаторов: 
- `ReviewSerializer` 

для сериализации отзывов, наследуйте от ModelSerializer и укажите в нём `все поля`
- `ProductListSerializer` 

для сериализации списка товаров, наследуйтесь от Serializer и укажите поля `title` и `price`
- `ProductDetailsSerializer` 

для сериализации деталей товара, наследуйтесь от ModelSerializer и укажите поля `title`, 
`description`, `price` и `reviews`(список отзывов, необходимо применить [вложенную сериализацию](https://www.django-rest-framework.org/api-guide/relations/#nested-relationships))
### Запросы

Необходимо реализовать контроллеры 2 страниц:

- `список товаров (FBV)` 

используя функцию с декоратором @api_view, для сериализации используйте класс `ProductListSerializer`
- `детали товара (CBV)` 

используя класс APIView, для сериализации используйте класс `ProductDetailsSerializer`

## Ожидаемый результат

### список товаров

в результате запроса должен возвращаться объект следующего вида:

```json
[
  {
    "title": "Samsung Galaxy S23",
    "price": 70000.00
  },
  {
    "title": "Apple IPhone 15",
    "price": 100000.00
  }
]
```

### детали товара

```json
{
  "title": "Xiaomi Mi12",
  "description": "Отличный телефон, топ за свои деньги",
  "price": 45000,
  "reviews": [
    {
      "text":  "Совершенно не понравился телефон, могло быть и лучше",
      "mark": 2
    },
    {
      "text": "Как по мне, очень достойный телефон. Всё работает как надо",
      "mark": 4
    }
  ]
}
```

## Критерии оценки

Для получения зачёта по данному заданию необходимо выполнить следующие пункты:
- подключите БД к проекту
- реализуйте сериализаторы
- опишите логику вьюшек: получение объектов из БД, сериализация, выдача ответа

## Доп задание

В модуле `views` есть заготовка вьюшки `ProductFilteredReviews`. Реализуйте в ней получение отзывов к товару с определённой оценкой.

Метод get получает параметр `product_id`(id товара), по нему Вы можете получить из БД отзывы к определённому товару.

Оценку Вы можете получить из [необязательного параметра запроса](https://www.django-rest-framework.org/api-guide/requests/#query_params) mark.
Если параметр передаётся при запросе, то по этому значению отфильтруйте записи с нужной оценкой, если же нет, то верните все отзывы
## Документация по проекту

Для запуска проекта необходимо

Установить зависимости:
```commandline
pip install -r requirements.txt
```

Выполнить следующие команды:

- Команда для применения миграций для базы данных

```commandline
python manage.py migrate
```

- Команда для запуска приложения

```commandline
python manage.py runserver
```

- При создании моделей или их изменении необходимо выполнить следующие команды:

```commandline
python manage.py makemigrations
python manage.py migrate
```