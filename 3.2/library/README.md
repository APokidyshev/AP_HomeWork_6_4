# Реализуем API онлайн-библиотеки

## Задание

Необходимо реализовать небольшую онлайн-библиотеку. По сути, она состоит из 2 сущностей: книги и заказы.

От Вас требуется реализовать действия crud над объектам

- `/api/v1/books/` - список всех товаров
- `/api/v1/books/create/` - добавление книги
- `/api/v1/books/<id_книги>/` - получение одной книги
- `/api/v1/books/update/<id_книги>/` - редактирование данных о книге
- `/api/v1/books/delete/<id_книги>/` - удаление книги

также необходимо реализовать viewset для заказов. 

## Реализация


### БД

Создайте базу данных, подключите её к проекту и примените миграции для создания таблиц.

### Модели

В модуле `models.py` нашего приложения уже есть модели `Book` (книги) и `Order` (заказы). 

### Административная панель

В административной панели уже зарегистрированы необходимые модели

### Сериализация

В модуле `serializers.py` уже есть заготовка 2 сериализаторов: 
- `BookSerializer` 

для сериализации книг, укажите в нём `все поля`
- `OrderSerializer` 

для сериализации заказов, укажите в нём `все поля`

### Запросы

примеры запросов находятся в файле `request.http`, убедитесь, что все запросы проходят без ошибок. 

Для того, чтобы проходили запросы для заказов, в модуле `urls.py` зарегистрируйте вьюсет в роутере

## Доп задание

измените структуру 2 списков: списка книг и списка заказов. Для этого в сериализаторах реализуйте методы to_representation.

- `список книг`: необходимо добавить к каждой книге количество её заказов

- `список заказов`: в обычном виде поле `books` будет возвращать список из id книг.
```json
[
  {
    "id": 1,
    "user_name": "Иванов Иван Иванович",
    "days_count": 3,
    "date": "2023-12-21",
    "books": [
      1, 
      2
    ]
  }
]
```

Реализуйте метод to_representation так, чтобы он возвращал полную информацию о книге.

```json
[
  {
    "id": 1,
    "user_name": "Иванов Иван Иванович",
    "days_count": 3,
    "date": "2023-12-21",
    "books": [
      {
        "author": "А.С.Пушкин",
        "title": "Капитанская дочка",
        "year": 1836
      }
    ]
  }
]
```

## Документация по проекту

Для запуска проекта необходимо

Установить зависимости:
```commandline
pip install -r requirements.txt
```

Выполнить следующие команды:

- Команда для применения миграций для базы данных

```commandline
python manage.py migrate
```

- Команда для запуска приложения

```commandline
python manage.py runserver
```

- При создании моделей или их изменении необходимо выполнить следующие команды:

```commandline
python manage.py makemigrations
python manage.py migrate
```